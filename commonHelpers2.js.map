{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["const formElem = document.querySelector('.feedback-form');\nconst formEmail = formElem.elements.email;\nconst formMessage = formElem.elements.message;\nconst errorElem = document.querySelector(\".js-form-error\");\nconst errorElemText = errorElem.querySelector(\".error-text\");\nconst LS_KEY = \"feedback-form-state\";\nlet formData = {\n    email: \"\",\n    message: \"\",\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", renderFields);\n\nformElem.addEventListener(\"input\", () => {\n    const formDetails = new FormData(formElem);\n    \n    formData.email = formDetails.get(\"email\").trim();\n    formData.message = formDetails.get(\"message\").trim();\n\n    setItemToLS(LS_KEY, formData);\n});\n\nformElem.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    if (!(formEmail.value.trim() && formMessage.value.trim())) {\n        showErrorMessage();\n    } else {\n        formEmail.value = \"\";\n        formMessage.value = \"\";\n\n        console.log(formData);\n\n        removeFromLS(LS_KEY);\n        showSuccessMessage();\n    }\n})\n\nfunction renderFields() {\n    const data = loadFromLS(LS_KEY) || {};\n\n    formEmail.value = data.email || \"\";\n    formMessage.value = data.message || \"\";\n}\n\nfunction showErrorMessage() {\n    if (!errorElem.classList.contains(\"active\")) {\n        errorElem.classList.add(\"active\");\n        errorElemText.textContent = \"Fill please all fields\";\n    }\n}\n\nfunction showSuccessMessage() {\n    if (!errorElem.classList.contains(\"active\")) {\n        errorElem.classList.add(\"active\");\n    }\n\n    errorElem.classList.add(\"success\");\n    errorElemText.textContent = \"Your form has been successfully submitted\";\n\n    setTimeout(() => {\n        errorElem.classList.remove(\"active\");\n        errorElem.classList.remove(\"success\");\n    }, 3000);\n}\n\nfunction setItemToLS(key, value) {\n    localStorage.setItem(key, JSON.stringify(value));\n}\n\nfunction loadFromLS(key) {\n    const data = localStorage.getItem(key);\n\n    try {\n        const result = JSON.parse(data);\n        return result;\n    } catch (e) {\n        return data;\n    }\n}\n\nfunction removeFromLS(key) {\n    localStorage.removeItem(key);\n}"],"names":["formElem","formEmail","formMessage","errorElem","errorElemText","LS_KEY","formData","renderFields","formDetails","setItemToLS","removeFromLS","showSuccessMessage","showErrorMessage","data","loadFromLS","key","value"],"mappings":"wFAAA,MAAMA,EAAW,SAAS,cAAc,gBAAgB,EAClDC,EAAYD,EAAS,SAAS,MAC9BE,EAAcF,EAAS,SAAS,QAChCG,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAgBD,EAAU,cAAc,aAAa,EACrDE,EAAS,sBACf,IAAIC,EAAW,CACX,MAAO,GACP,QAAS,EACb,EAEA,OAAO,iBAAiB,mBAAoBC,CAAY,EAExDP,EAAS,iBAAiB,QAAS,IAAM,CACrC,MAAMQ,EAAc,IAAI,SAASR,CAAQ,EAEzCM,EAAS,MAAQE,EAAY,IAAI,OAAO,EAAE,OAC1CF,EAAS,QAAUE,EAAY,IAAI,SAAS,EAAE,OAE9CC,EAAYJ,EAAQC,CAAQ,CAChC,CAAC,EAEDN,EAAS,iBAAiB,SAAW,GAAM,CACvC,EAAE,eAAc,EAEVC,EAAU,MAAM,KAAI,GAAMC,EAAY,MAAM,KAAI,GAGlDD,EAAU,MAAQ,GAClBC,EAAY,MAAQ,GAEpB,QAAQ,IAAII,CAAQ,EAEpBI,EAAaL,CAAM,EACnBM,KARAC,GAUR,CAAC,EAED,SAASL,GAAe,CACpB,MAAMM,EAAOC,EAAWT,CAAM,GAAK,CAAA,EAEnCJ,EAAU,MAAQY,EAAK,OAAS,GAChCX,EAAY,MAAQW,EAAK,SAAW,EACxC,CAEA,SAASD,GAAmB,CACnBT,EAAU,UAAU,SAAS,QAAQ,IACtCA,EAAU,UAAU,IAAI,QAAQ,EAChCC,EAAc,YAAc,yBAEpC,CAEA,SAASO,GAAqB,CACrBR,EAAU,UAAU,SAAS,QAAQ,GACtCA,EAAU,UAAU,IAAI,QAAQ,EAGpCA,EAAU,UAAU,IAAI,SAAS,EACjCC,EAAc,YAAc,4CAE5B,WAAW,IAAM,CACbD,EAAU,UAAU,OAAO,QAAQ,EACnCA,EAAU,UAAU,OAAO,SAAS,CACvC,EAAE,GAAI,CACX,CAEA,SAASM,EAAYM,EAAKC,EAAO,CAC7B,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAK,CAAC,CACnD,CAEA,SAASF,EAAWC,EAAK,CACrB,MAAMF,EAAO,aAAa,QAAQE,CAAG,EAErC,GAAI,CAEA,OADe,KAAK,MAAMF,CAAI,CAEjC,MAAW,CACR,OAAOA,CACV,CACL,CAEA,SAASH,EAAaK,EAAK,CACvB,aAAa,WAAWA,CAAG,CAC/B"}